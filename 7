#include <iostream>
#include <vector>
#include <algorithm>
#include <numeric>

class VectorManager {
private:
    std::vector<int> vec;
    int variant = 6; // вариант по умолчанию
public:
    // 1. Просмотр массива
    void displayVector() {
        std::cout << "[";
        for (size_t i = 0; i < vec.size(); ++i) {
            std::cout << vec[i];
            if (i != vec.size() - 1) {
                std::cout << " ";
            }
        }
        std::cout << "]" << std::endl;
    }
    // 2. Добавить элемент в начало
    void addToBeginning(int value) {
        vec.insert(vec.begin(), value);
    }
    // 3. Добавить элемент в конец
    void addToEnd(int value) {
        vec.push_back(value);
    }
    // 4. Очистка всего массива
    void clearVector() {
        vec.clear();
    }
    // 5. Поиск элемента в массиве
    void findElement(int value) {
        std::vector<size_t> indices;
        for (size_t i = 0; i < vec.size(); ++i) {
            if (vec[i] == value) {
                indices.push_back(i);
            }
        }
        std::cout << "[";
        for (size_t i = 0; i < indices.size(); ++i) {
            std::cout << indices[i];
            if (i != indices.size() - 1) {
                std::cout << ",";
            }
        }
        std::cout << "]" << std::endl;
    }
    // задание 1
    void processVariant3bl() {
        std::cout << "До обработки: ";
        displayVector();
        if (vec.size() % 2 == 0) {
            // Если кол-во элементов четное - удалить первый
            if (!vec.empty()) {
                vec.erase(vec.begin());
                std::cout << "Удален первый элемент (четное количество)" << std::endl;
            }
        }
        else {
            // Если нечетное - удалить до 4 последних если возможно
            size_t elementsToRemove = std::min(vec.size(), size_t(4));
            if (elementsToRemove > 0) {
                vec.erase(vec.end() - elementsToRemove, vec.end());
                std::cout << "Удалено " << elementsToRemove << " последних элементов (нечетное количество)" << std::endl;
            }
        }
        std::cout << "После обработки: ";
        displayVector();
    }
    // Разбиение слагаемых
    void processVariant5() {
        std::cout << "Введите число K: ";
        int K;
        std::cin >> K;

        std::cout << "До обработки: ";
        displayVector();

        // Находим последовательные числа, сумма которых равна K
        std::vector<int> numbers;
        int sum = 0;
        int current = 1;

        while (sum < K) {
            numbers.push_back(current);
            sum += current;
            current++;
        }
        // Если сумма превысила K, убираем лишние элементы
        while (sum > K && !numbers.empty()) {
            sum -= numbers.back();
            numbers.pop_back();
        }
        if (sum != K) {
            std::cout << "Не удалось найти последовательные числа с суммой " << K << std::endl;
            return;
        }
        // Разбиваем числа поровну в начало и конец
        size_t half = numbers.size() / 2;
        std::vector<int> firstHalf, secondHalf;

        for (size_t i = 0; i < numbers.size(); ++i) {
            if (i < half) {
                firstHalf.push_back(numbers[i]);
            }
            else {
                secondHalf.push_back(numbers[i]);
            }
        }
        // Очищаем текущий вектор и заполняем поочередно
        std::vector<int> newVec;

        // Чередуем элементы из первой и второй половин
        size_t maxSize = std::max(firstHalf.size(), secondHalf.size());
        for (size_t i = 0; i < maxSize; ++i) {
            if (i < firstHalf.size()) {
                newVec.push_back(firstHalf[i]);
            }
            if (i < secondHalf.size()) {
                newVec.push_back(secondHalf[i]);
            }
        }
        vec = newVec;

        std::cout << "После обработки: ";
        displayVector();
        std::cout << "Использованные числа: ";
        for (int num : numbers) {
            std::cout << num << " ";
        }
        std::cout << std::endl;
    }
    // Главное меню
    void showMenu() {
        int choice;
        do {
            std::cout << "\n=== МЕНЮ ===" << std::endl;
            std::cout << "0. Выход" << std::endl;
            std::cout << "1. Просмотр массива" << std::endl;
            std::cout << "2. Добавить элемент в начало" << std::endl;
            std::cout << "3. Добавить элемент в конец" << std::endl;
            std::cout << "4. Очистка всего массива" << std::endl;
            std::cout << "5. Поиск элемента в массиве" << std::endl;
            std::cout << "6. Задание варианта" << std::endl;
            std::cout << "7. Обработка по разбиению слагаемых" << std::endl;
            std::cout << "Выберите действие: ";
            std::cin >> choice;

            switch (choice) {
            case 0:
                std::cout << "Выход..." << std::endl;
                break;
            case 1:
                displayVector();
                break;
            case 2: {
                int value;
                std::cout << "Введите элемент для добавления в начало: ";
                std::cin >> value;
                addToBeginning(value);
                break;
            }
            case 3: {
                int value;
                std::cout << "Введите элемент для добавления в конец: ";
                std::cin >> value;
                addToEnd(value);
                break;
            }
            case 4:
                clearVector();
                std::cout << "Массив очищен" << std::endl;
                break;
            case 5: {
                int value;
                std::cout << "Введите элемент для поиска: ";
                std::cin >> value;
                findElement(value);
                break;
            }
            case 6:
                processVariant3bl();
                break;
            case 7:
                processVariant5();
                break;
            default:
                std::cout << "Неверный выбор!" << std::endl;
            }
        } while (choice != 0);
    }
};

int main() {
    setlocale(LC_ALL, "Russian");
    VectorManager manager;
    manager.showMenu();
    return 0;
}
